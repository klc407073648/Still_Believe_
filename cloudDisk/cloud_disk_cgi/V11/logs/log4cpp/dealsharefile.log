[2020-09-05 21:13:39:729 - INFO](DealShareFileCgi):LoggerManager created, name is DealShareFileCgi
[2020-09-05 21:13:39:729 - INFO](Config):LoggerManager created, name is Config
[2020-09-05 21:13:39:730 - INFO](CMyRedis):LoggerManager created, name is CMyRedis
[2020-09-05 21:13:39:730 - INFO](DealShareFileCgi):DealShareFileCgi Create!
[2020-09-05 21:13:39:730 - DEBUG](DealShareFileCgi):init begin
[2020-09-05 21:13:39:730 - DEBUG](Config):Config Create!
[2020-09-05 21:13:39:730 - INFO](Config):mysql_host=localhost,mysql_user=root,mysql_passwd=klczxas789,mysql_dbname=cloud_disk
[2020-09-05 21:13:39:730 - INFO](Config):redis_ip=127.0.0.1,redis_port=6379
[2020-09-05 21:13:39:730 - INFO](Config):log4cpp_path=./myprj/dealsharefile/conf/log4cpp.conf,log4cpp_expire_time=86400
[2020-09-05 21:13:39:730 - INFO](Config):m_name=conf.json,m_description=This is conf json,m_type=json
[2020-09-05 21:13:39:730 - INFO](Config):dfs_client_path=/etc/fdfs/client.conf
[2020-09-05 21:13:39:730 - INFO](Config):storage_web_server_port=23000
[2020-09-05 21:13:39:730 - INFO](Config):Reading Complete!
[2020-09-05 21:13:39:730 - DEBUG](DealShareFileCgi):init end
[2020-09-05 21:14:28:955 - INFO](DealShareFileCgi):buf = {
    "filename": "des.o",
    "md5": "68106b4a53a346c16c3c5835fc960e40",
    "user": "kevin"
}

[2020-09-05 21:14:28:955 - DEBUG](DealShareFileCgi):getJsonInfo begin
[2020-09-05 21:14:28:955 - INFO](DealShareFileCgi):json parse user=kevin , md5=68106b4a53a346c16c3c5835fc960e40 , filename=des.o
[2020-09-05 21:14:28:955 - INFO](DealShareFileCgi):Reading Complete!
[2020-09-05 21:14:28:955 - DEBUG](DealShareFileCgi):getJsonInfo end
[2020-09-05 21:14:28:955 - INFO](DealShareFileCgi): cmd = cancel ,user = kevin ,md5 = 68106b4a53a346c16c3c5835fc960e40,filename = des.o
[2020-09-05 21:14:28:955 - DEBUG](DealShareFileCgi):cancelShareFile begin
[2020-09-05 21:14:28:959 - INFO](DealShareFileCgi):redis and mysql connect success!
[2020-09-05 21:14:28:960 - INFO](DealShareFileCgi):sql_str:[update user_file_list set shared_status = 0 where user = 'kevin' and md5 = '68106b4a53a346c16c3c5835fc960e40' and filename = 'des.o'] exec success!
[2020-09-05 21:14:29:085 - INFO](DealShareFileCgi):sql_str:[select count from user_file_count where user = 'xxx_share_xxx_file_xxx_list_xxx_count_xxx'] exec success!
[2020-09-05 21:14:29:085 - INFO](DealShareFileCgi):count: 2
[2020-09-05 21:14:29:086 - INFO](DealShareFileCgi):sql_str:[update user_file_count set count = 1 where user = 'xxx_share_xxx_file_xxx_list_xxx_count_xxx'] exec success!
[2020-09-05 21:14:29:087 - INFO](DealShareFileCgi):sql_str:[delete from share_file_list where user = 'kevin' and md5 = '68106b4a53a346c16c3c5835fc960e40' and filename = 'des.o'] exec success!
[2020-09-05 21:14:29:088 - DEBUG](DealShareFileCgi):cancelShareFile end
[2020-09-05 21:14:29:088 - INFO](DealShareFileCgi):out = {
   "code" : "018"
}

[2020-09-05 21:14:35:724 - INFO](DealShareFileCgi):buf = {
    "filename": "cfg.json",
    "md5": "71a7fd3727f10fd59250ca6fdbf19fb9",
    "user": "kevin"
}

[2020-09-05 21:14:35:724 - DEBUG](DealShareFileCgi):getJsonInfo begin
[2020-09-05 21:14:35:724 - INFO](DealShareFileCgi):json parse user=kevin , md5=71a7fd3727f10fd59250ca6fdbf19fb9 , filename=cfg.json
[2020-09-05 21:14:35:724 - INFO](DealShareFileCgi):Reading Complete!
[2020-09-05 21:14:35:724 - DEBUG](DealShareFileCgi):getJsonInfo end
[2020-09-05 21:14:35:724 - INFO](DealShareFileCgi): cmd = pv ,user = kevin ,md5 = 71a7fd3727f10fd59250ca6fdbf19fb9,filename = cfg.json
[2020-09-05 21:14:35:724 - DEBUG](DealShareFileCgi):pvFile begin
[2020-09-05 21:14:35:725 - INFO](DealShareFileCgi):redis and mysql connect success!
[2020-09-05 21:14:35:725 - INFO](DealShareFileCgi):sql_str:[select pv from share_file_list where md5 = '71a7fd3727f10fd59250ca6fdbf19fb9' and filename = 'cfg.json'] exec success!
[2020-09-05 21:14:35:725 - INFO](DealShareFileCgi):pv: 0
[2020-09-05 21:14:35:726 - INFO](DealShareFileCgi):sql_str:[update share_file_list set pv = 1 where md5 = '71a7fd3727f10fd59250ca6fdbf19fb9' and filename = 'cfg.json'] exec success!
[2020-09-05 21:14:35:727 - INFO](DealShareFileCgi):ret2 = 1
[2020-09-05 21:14:35:727 - INFO](DealShareFileCgi):ret = 0
[2020-09-05 21:14:35:727 - INFO](DealShareFileCgi):ret = 1
[2020-09-05 21:14:35:727 - DEBUG](DealShareFileCgi):pvFile end
[2020-09-05 21:14:35:727 - INFO](DealShareFileCgi):out = {
   "code" : "017"
}

[2020-09-05 21:14:48:723 - INFO](DealShareFileCgi):buf = {
    "filename": "cfg.json",
    "md5": "71a7fd3727f10fd59250ca6fdbf19fb9",
    "user": "kevin"
}

[2020-09-05 21:14:48:723 - DEBUG](DealShareFileCgi):getJsonInfo begin
[2020-09-05 21:14:48:723 - INFO](DealShareFileCgi):json parse user=kevin , md5=71a7fd3727f10fd59250ca6fdbf19fb9 , filename=cfg.json
[2020-09-05 21:14:48:723 - INFO](DealShareFileCgi):Reading Complete!
[2020-09-05 21:14:48:723 - DEBUG](DealShareFileCgi):getJsonInfo end
[2020-09-05 21:14:48:723 - INFO](DealShareFileCgi): cmd = pv ,user = kevin ,md5 = 71a7fd3727f10fd59250ca6fdbf19fb9,filename = cfg.json
[2020-09-05 21:14:48:723 - DEBUG](DealShareFileCgi):pvFile begin
[2020-09-05 21:14:48:723 - INFO](DealShareFileCgi):redis and mysql connect success!
[2020-09-05 21:14:48:724 - INFO](DealShareFileCgi):sql_str:[select pv from share_file_list where md5 = '71a7fd3727f10fd59250ca6fdbf19fb9' and filename = 'cfg.json'] exec success!
[2020-09-05 21:14:48:724 - INFO](DealShareFileCgi):pv: 1
[2020-09-05 21:14:48:740 - INFO](DealShareFileCgi):sql_str:[update share_file_list set pv = 2 where md5 = '71a7fd3727f10fd59250ca6fdbf19fb9' and filename = 'cfg.json'] exec success!
[2020-09-05 21:14:48:740 - INFO](DealShareFileCgi):ret2 = 1
[2020-09-05 21:14:48:740 - INFO](DealShareFileCgi):ret = 0
[2020-09-05 21:14:48:740 - INFO](DealShareFileCgi):ret = 2
[2020-09-05 21:14:48:740 - DEBUG](DealShareFileCgi):pvFile end
[2020-09-05 21:14:48:740 - INFO](DealShareFileCgi):out = {
   "code" : "017"
}

[2020-09-05 21:14:53:292 - INFO](DealShareFileCgi):buf = {
    "filename": "cfg.json",
    "md5": "71a7fd3727f10fd59250ca6fdbf19fb9",
    "user": "kevin"
}

[2020-09-05 21:14:53:292 - DEBUG](DealShareFileCgi):getJsonInfo begin
[2020-09-05 21:14:53:292 - INFO](DealShareFileCgi):json parse user=kevin , md5=71a7fd3727f10fd59250ca6fdbf19fb9 , filename=cfg.json
[2020-09-05 21:14:53:292 - INFO](DealShareFileCgi):Reading Complete!
[2020-09-05 21:14:53:292 - DEBUG](DealShareFileCgi):getJsonInfo end
[2020-09-05 21:14:53:292 - INFO](DealShareFileCgi): cmd = cancel ,user = kevin ,md5 = 71a7fd3727f10fd59250ca6fdbf19fb9,filename = cfg.json
[2020-09-05 21:14:53:292 - DEBUG](DealShareFileCgi):cancelShareFile begin
[2020-09-05 21:14:53:293 - INFO](DealShareFileCgi):redis and mysql connect success!
[2020-09-05 21:14:53:295 - INFO](DealShareFileCgi):sql_str:[update user_file_list set shared_status = 0 where user = 'kevin' and md5 = '71a7fd3727f10fd59250ca6fdbf19fb9' and filename = 'cfg.json'] exec success!
[2020-09-05 21:14:53:296 - INFO](DealShareFileCgi):sql_str:[select count from user_file_count where user = 'xxx_share_xxx_file_xxx_list_xxx_count_xxx'] exec success!
[2020-09-05 21:14:53:297 - INFO](DealShareFileCgi):count: 1
[2020-09-05 21:14:53:298 - INFO](DealShareFileCgi):sql_str:[delete from user_file_count where user = 'xxx_share_xxx_file_xxx_list_xxx_count_xxx'] exec success!
[2020-09-05 21:14:53:311 - INFO](DealShareFileCgi):sql_str:[delete from share_file_list where user = 'kevin' and md5 = '71a7fd3727f10fd59250ca6fdbf19fb9' and filename = 'cfg.json'] exec success!
[2020-09-05 21:14:53:311 - DEBUG](DealShareFileCgi):cancelShareFile end
[2020-09-05 21:14:53:311 - INFO](DealShareFileCgi):out = {
   "code" : "018"
}

